!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require(undefined)):"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?exports.finalboss=e(require("jquery")):t.finalboss=e(t.jQuery)}(this,function(t){return function(t){function e(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function s(t){if(!(this instanceof s))return new s(t);this._opt=t,this._tpl={click:"",hover:"",expo:""},this._listeners=null,this._destroyed=!1,this._debug=!1,this._parseOption(function(){return f++})}function n(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"",i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},o=t,s=o.match(/{[A-Z]+}/g);if(s)for(var n=0;n<s.length;n++){var r=s[n].slice(1,-1),c=(0,u["default"])(r)||i[r]||"";o=o.replace(new RegExp(s[n],"g"),encodeURIComponent(c))}return o=o.replace(new RegExp("{%v}","g"),e)}var r=i(4),c=o(r),a=i(3),h=o(a),l=i(2),u=o(l),p=function(){window.console&&window.console.log&&window.console.log.apply(this,arguments)},f=0;s.prototype.CONST={ATTR:{CLICK:"data-boss",HOVER:"data-boss-hover",HOVER_DELAY:"data-boss-hover-delay",EXPO:"data-boss-expo",ONCE:"data-boss-once",STOP:"data-boss-stop",TEMPLATE:"data-boss-template",DISABLED:"data-boss-disabled"},DATAKEY:{COUNT:"_boss_count",HOVER_TIMER:"_boss_hover_timer",EXPO_WATCHER:"_boss_expo_watcher"},EVKEY:{STOP:"_boss_stop"},HOVER_DELAY:300,EXPO_UPDATE_INTERVAL:2e3,API:"https://btrace.qq.com/kvcollect"},s.prototype._parseOption=function(t){this._debug=!!this._opt.debug;var e=this._opt,i="function"==typeof Object.create?Object.create(null):{};if("string"==typeof e?i.click=i.hover=i.expo=e:e.template&&("string"==typeof e.template?i.click=i.hover=i.expo=e.template:c["default"].each(["click","hover","expo"],function(t,o){"string"==typeof e.template[o]&&(i[o]=e.template[o])})),!i.click&&!i.hover&&!i.expo)throw new TypeError("[finalboss] option error, no template found");this._tpl=i,this._debug&&p("templates:",this._tpl),t&&t()},s.prototype.start=function(){var t=this;if(!this._destroyed){if(this._listeners={click:function(e){t._action("click",(0,c["default"])(this),e)},mouseenter:function(e){var i=(0,c["default"])(this),o=function(){t._action("hover",i,e)},s=parseInt(i.attr(t.CONST.ATTR.HOVER_DELAY)||t.CONST.HOVER_DELAY,10);s>0?i.data(t.CONST.DATAKEY.HOVER_TIMER,window.setTimeout(o,s)):o()},mouseleave:function(e){var i=(0,c["default"])(this).data(t.CONST.DATAKEY.HOVER_TIMER);i&&window.clearTimeout(i)}},(0,c["default"])(document).on("click","["+this.CONST.ATTR.CLICK+"]",this._listeners.click).on("mouseenter","["+this.CONST.ATTR.HOVER+"]",this._listeners.mouseenter).on("mouseleave","["+this.CONST.ATTR.HOVER+"]",this._listeners.mouseleave),this.updateExpo(),this._opt.expoAutoUpdate){var e="number"==typeof this._opt.expoAutoUpdate?Math.abs(this._opt.expoAutoUpdate):this.CONST.EXPO_UPDATE_INTERVAL;setInterval(function(){t.updateExpo()},e)}return this}},s.prototype.updateExpo=function(){var t=this;(0,c["default"])("["+this.CONST.ATTR.EXPO+"]").each(function(e,i){var o=(0,c["default"])(i),s=o.data(t.CONST.DATAKEY.EXPO_WATCHER);s||(s=h["default"].create(i),s.enterViewport(function(){return t._action("expo",o,null)}),o.data(t.CONST.DATAKEY.EXPO_WATCHER,s))})},s.prototype.destroy=function(){if(!this._destroyed)return this._listeners&&(0,c["default"])(document).off("click","["+this.CONST.ATTR.CLICK+"]",this._listeners.click).off("mouseenter","["+this.CONST.ATTR.HOVER+"]",this._listeners.mouseenter).off("mouseleave","["+this.CONST.ATTR.HOVER+"]",this._listeners.mouseleave),this._destroyed=!0,f--,null},s.prototype._action=function(t,e,i){var o=e.attr(this.CONST.ATTR[t.toUpperCase()]);if(o&&void 0===e.attr(this.CONST.ATTR.DISABLED)){var s=e.attr(this.CONST.ATTR.TEMPLATE)||this._tpl[t];if(s){var r=e.data(this.CONST.DATAKEY.COUNT)||0;if(!(void 0!==e.attr(this.CONST.ATTR.ONCE)&&r>0)){if(i){if(i[this.CONST.EVKEY.STOP])return;void 0!==e.attr(this.CONST.ATTR.STOP)&&(i[this.CONST.EVKEY.STOP]=!0)}var a={};if("click"===t){var h=i.target;if(-1!==s.indexOf("{HREF}")){var l=(0,c["default"])(h).closest("[href]",e)[0];l&&(a.HREF=l.href||l.getAttribute("href"))}}a.COUNT=r.toString(10),this._send(n(s,o,a)),e.data(this.CONST.DATAKEY.COUNT,r+1)}}}},s.prototype._send=function(t){if(!this._destroyed){/^((https?:)?\/\/[^\/])/.test(t)||(t=this.CONST.API+"?"+t);var e=new window.Image;e.onload=e.onerror=function(){e=null},e.src=t||"about_blank",this._debug&&p("finalboss",t)}},s.prototype.send=function(){},s.prototype.debug=function(t){return this._debug=!!t,this},function(){var t=window[(0,c["default"])("script[data-boss-option]").attr("data-boss-option")];t&&new s(t).start()}(),t.exports=function(t){if(!(f>0))return new s(t)}},function(t,e,i){"use strict";t.exports=i(0)},function(t,e,i){"use strict";var o={};o.qq=function(){var t=document.cookie.match(new RegExp("(^|)o_cookie=([^;]*)(;|$)"));return t?unescape(t[2]):""},o.url=function(){return window.location.href},o.refer=function(){return window.document.referrer},o.ts=function(){return(new Date).valueOf()},o.random=function(){return parseInt(1e8*Math.random(),10)},t.exports=function(t){return t?(t=t.toLowerCase(),"function"==typeof o[t]?o[t]():o[t]):""}},function(t,e,i){!function(e,i){t.exports=i()}(0,function(){return function(t){function e(o){if(i[o])return i[o].exports;var s=i[o]={exports:{},id:o,loaded:!1};return t[o].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";var o=i(1),s=o.isInBrowser,n=i(2),r=new n(s?document.body:null);r.setStateFromDOM(null),r.listenToDOM(),s&&(window.scrollMonitor=r),t.exports=r},function(t,e){"use strict";e.VISIBILITYCHANGE="visibilityChange",e.ENTERVIEWPORT="enterViewport",e.FULLYENTERVIEWPORT="fullyEnterViewport",e.EXITVIEWPORT="exitViewport",e.PARTIALLYEXITVIEWPORT="partiallyExitViewport",e.LOCATIONCHANGE="locationChange",e.STATECHANGE="stateChange",e.eventTypes=[e.VISIBILITYCHANGE,e.ENTERVIEWPORT,e.FULLYENTERVIEWPORT,e.EXITVIEWPORT,e.PARTIALLYEXITVIEWPORT,e.LOCATIONCHANGE,e.STATECHANGE],e.isOnServer="undefined"==typeof window,e.isInBrowser=!e.isOnServer,e.defaultOffsets={top:0,bottom:0}},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t){return a?0:t===document.body?window.innerHeight||document.documentElement.clientHeight:t.clientHeight}function n(t){return a?0:t===document.body?Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight):t.scrollHeight}function r(t){return a?0:t===document.body?window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop}var c=i(1),a=c.isOnServer,h=c.isInBrowser,l=c.eventTypes,u=i(3),p=function(){function t(e,i){function c(){if(h.viewportTop=r(e),h.viewportBottom=h.viewportTop+h.viewportHeight,h.documentHeight=n(e),h.documentHeight!==u){for(p=h.watchers.length;p--;)h.watchers[p].recalculateLocation();u=h.documentHeight}}function a(){for(f=h.watchers.length;f--;)h.watchers[f].update();for(f=h.watchers.length;f--;)h.watchers[f].triggerCallbacks()}o(this,t);var h=this;this.item=e,this.watchers=[],this.viewportTop=null,this.viewportBottom=null,this.documentHeight=n(e),this.viewportHeight=s(e),this.DOMListener=function(){t.prototype.DOMListener.apply(h,arguments)},this.eventTypes=l,i&&(this.containerWatcher=i.create(e));var u,p,f;this.update=function(){c(),a()},this.recalculateLocations=function(){this.documentHeight=0,this.update()}}return t.prototype.listenToDOM=function(){h&&(window.addEventListener?(this.item===document.body?window.addEventListener("scroll",this.DOMListener):this.item.addEventListener("scroll",this.DOMListener),window.addEventListener("resize",this.DOMListener)):(this.item===document.body?window.attachEvent("onscroll",this.DOMListener):this.item.attachEvent("onscroll",this.DOMListener),window.attachEvent("onresize",this.DOMListener)),this.destroy=function(){window.addEventListener?(this.item===document.body?(window.removeEventListener("scroll",this.DOMListener),this.containerWatcher.destroy()):this.item.removeEventListener("scroll",this.DOMListener),window.removeEventListener("resize",this.DOMListener)):(this.item===document.body?(window.detachEvent("onscroll",this.DOMListener),this.containerWatcher.destroy()):this.item.detachEvent("onscroll",this.DOMListener),window.detachEvent("onresize",this.DOMListener))})},t.prototype.destroy=function(){},t.prototype.DOMListener=function(t){this.setStateFromDOM(t)},t.prototype.setStateFromDOM=function(t){var e=r(this.item),i=s(this.item),o=n(this.item);this.setState(e,i,o,t)},t.prototype.setState=function(t,e,i,o){var s=e!==this.viewportHeight||i!==this.contentHeight;if(this.latestEvent=o,this.viewportTop=t,this.viewportHeight=e,this.viewportBottom=t+e,this.contentHeight=i,s)for(var n=this.watchers.length;n--;)this.watchers[n].recalculateLocation();this.updateAndTriggerWatchers(o)},t.prototype.updateAndTriggerWatchers=function(t){for(var e=this.watchers.length;e--;)this.watchers[e].update();for(e=this.watchers.length;e--;)this.watchers[e].triggerCallbacks(t)},t.prototype.createCustomContainer=function(){return new t},t.prototype.createContainer=function(e){"string"==typeof e?e=document.querySelector(e):e&&e.length>0&&(e=e[0]);var i=new t(e,this);return i.setStateFromDOM(),i.listenToDOM(),i},t.prototype.create=function(t,e){"string"==typeof t?t=document.querySelector(t):t&&t.length>0&&(t=t[0]);var i=new u(this,t,e);return this.watchers.push(i),i},t.prototype.beget=function(t,e){return this.create(t,e)},t}();t.exports=p},function(t,e,i){"use strict";function o(t,e,i){function o(t,e){if(0!==t.length)for(O=t.length;O--;)b=t[O],b.callback.call(s,e,s),b.isOne&&t.splice(O,1)}var s=this;this.watchItem=e,this.container=t,this.offsets=i?i===+i?{top:i,bottom:i}:{top:i.top||f.top,bottom:i.bottom||f.bottom}:f,this.callbacks={};for(var d=0,w=p.length;d<w;d++)s.callbacks[p[d]]=[];this.locked=!1;var T,m,E,v,O,b;this.triggerCallbacks=function(t){switch(this.isInViewport&&!T&&o(this.callbacks[r],t),this.isFullyInViewport&&!m&&o(this.callbacks[c],t),this.isAboveViewport!==E&&this.isBelowViewport!==v&&(o(this.callbacks[n],t),m||this.isFullyInViewport||(o(this.callbacks[c],t),o(this.callbacks[h],t)),T||this.isInViewport||(o(this.callbacks[r],t),o(this.callbacks[a],t))),!this.isFullyInViewport&&m&&o(this.callbacks[h],t),!this.isInViewport&&T&&o(this.callbacks[a],t),this.isInViewport!==T&&o(this.callbacks[n],t),!0){case T!==this.isInViewport:case m!==this.isFullyInViewport:case E!==this.isAboveViewport:case v!==this.isBelowViewport:o(this.callbacks[u],t)}T=this.isInViewport,m=this.isFullyInViewport,E=this.isAboveViewport,v=this.isBelowViewport},this.recalculateLocation=function(){if(!this.locked){var t=this.top,e=this.bottom;if(this.watchItem.nodeName){var i=this.watchItem.style.display;"none"===i&&(this.watchItem.style.display="");for(var s=0,n=this.container;n.containerWatcher;)s+=n.containerWatcher.top-n.containerWatcher.container.viewportTop,n=n.containerWatcher.container;var r=this.watchItem.getBoundingClientRect();this.top=r.top+this.container.viewportTop-s,this.bottom=r.bottom+this.container.viewportTop-s,"none"===i&&(this.watchItem.style.display=i)}else this.watchItem===+this.watchItem?this.watchItem>0?this.top=this.bottom=this.watchItem:this.top=this.bottom=this.container.documentHeight-this.watchItem:(this.top=this.watchItem.top,this.bottom=this.watchItem.bottom);this.top-=this.offsets.top,this.bottom+=this.offsets.bottom,this.height=this.bottom-this.top,void 0===t&&void 0===e||this.top===t&&this.bottom===e||o(this.callbacks[l],null)}},this.recalculateLocation(),this.update(),T=this.isInViewport,m=this.isFullyInViewport,E=this.isAboveViewport,v=this.isBelowViewport}var s=i(1),n=s.VISIBILITYCHANGE,r=s.ENTERVIEWPORT,c=s.FULLYENTERVIEWPORT,a=s.EXITVIEWPORT,h=s.PARTIALLYEXITVIEWPORT,l=s.LOCATIONCHANGE,u=s.STATECHANGE,p=s.eventTypes,f=s.defaultOffsets;o.prototype={on:function(t,e,i){switch(!0){case t===n&&!this.isInViewport&&this.isAboveViewport:case t===r&&this.isInViewport:case t===c&&this.isFullyInViewport:case t===a&&this.isAboveViewport&&!this.isInViewport:case t===h&&this.isInViewport&&this.isAboveViewport:if(e.call(this,this.container.latestEvent,this),i)return}if(!this.callbacks[t])throw new Error("Tried to add a scroll monitor listener of type "+t+". Your options are: "+p.join(", "));this.callbacks[t].push({callback:e,isOne:i||!1})},off:function(t,e){if(!this.callbacks[t])throw new Error("Tried to remove a scroll monitor listener of type "+t+". Your options are: "+p.join(", "));for(var i,o=0;i=this.callbacks[t][o];o++)if(i.callback===e){this.callbacks[t].splice(o,1);break}},one:function(t,e){this.on(t,e,!0)},recalculateSize:function(){this.height=this.watchItem.offsetHeight+this.offsets.top+this.offsets.bottom,this.bottom=this.top+this.height},update:function(){this.isAboveViewport=this.top<this.container.viewportTop,this.isBelowViewport=this.bottom>this.container.viewportBottom,this.isInViewport=this.top<this.container.viewportBottom&&this.bottom>this.container.viewportTop,this.isFullyInViewport=this.top>=this.container.viewportTop&&this.bottom<=this.container.viewportBottom||this.isAboveViewport&&this.isBelowViewport},destroy:function(){var t=this.container.watchers.indexOf(this),e=this;this.container.watchers.splice(t,1);for(var i=0,o=p.length;i<o;i++)e.callbacks[p[i]].length=0},lock:function(){this.locked=!0},unlock:function(){this.locked=!1}};for(var d=0,w=p.length;d<w;d++){var T=p[d];o.prototype[T]=function(t){return function(e,i){this.on.call(this,t,e,i)}}(T)}t.exports=o}])})},function(e,i){e.exports=t}])});/*  |xGv00|e26009fbd8a6357e894e3bd4c0418da2 */